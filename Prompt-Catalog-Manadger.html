<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–µ–Ω–µ–¥–∂–µ—Ä –ü—Ä–æ–º–ø—Ç–æ–≤</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- Custom Styles -->
    <style>
      :root {
        --primary-color: #34568b; /* –°–∏–Ω–µ-—Å–µ—Ä—ã–π */
        --secondary-color: #6c757d; /* –°–µ—Ä—ã–π */
        --light-bg: #f8f9fa;
        --border-color: #dee2e6;
        --card-bg: #ffffff;
        --text-color: #212529;
      }

      body {
        background-color: var(--light-bg);
        color: var(--text-color);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      }

      .container {
        max-width: 1200px;
        margin-top: 2rem;
        margin-bottom: 2rem;
      }

      .header {
        background-color: var(--primary-color);
        color: white;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
        margin-bottom: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .header h1 {
        font-size: 1.75rem;
        margin-bottom: 0.25rem;
      }

      .header p {
        font-size: 1rem;
        margin-bottom: 0;
      }

      .card {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        height: 100%;
      }

      .prompt-card .card-text {
        min-height: 80px;
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .nav-tabs .nav-link {
        color: var(--secondary-color);
        border-color: var(--border-color);
      }

      .nav-tabs .nav-link.active {
        color: var(--primary-color);
        background-color: var(--card-bg);
        border-color: var(--border-color) var(--border-color) var(--card-bg);
      }

      .btn-primary {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
      }

      .btn-primary:hover {
        background-color: #2c476f;
        border-color: #2c476f;
      }

      .prompt-variations {
        margin-top: 1rem;
      }

      .form-control.is-invalid {
        border-color: #dc3545;
        padding-right: 2.25rem;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linecap='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
      }

      /* Styles for offcanvas menu */
      .offcanvas-header {
        background-color: var(--primary-color);
        color: white;
      }

      .offcanvas-title {
        color: white;
      }

      .offcanvas-body .list-group-item {
        cursor: pointer;
      }

      .offcanvas-body .list-group-item.active {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        color: white;
      }

      /* Adjustments for mobile view */
      @media (max-width: 767px) {
        .d-md-flex {
          flex-direction: column;
        }
        .order-md-2 {
          order: 2;
        }
        .order-md-1 {
          order: 1;
        }
      }
    </style>
  </head>
  <body>
    <!-- Main Container -->
    <div class="container">
      <!-- Header -->
      <header class="header">
        <h1>–ú–µ–Ω–µ–¥–∂–µ—Ä –ü—Ä–æ–º–ø—Ç–æ–≤</h1>
        <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ, —Ö—Ä–∞–Ω–∏—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏</p>
      </header>

      <!-- Main Content -->
      <main class="row">
        <!-- Prompt Controls -->
        <div class="col-12 mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <!-- Offcanvas trigger for mobile -->
            <button
              class="btn btn-outline-secondary d-md-none"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasMenu"
              aria-controls="offcanvasMenu"
            >
              <i class="bi-list"></i>
              <span class="ms-1">–ú–µ–Ω—é</span>
            </button>
            <!-- Dropdown for desktop -->
            <div class="dropdown d-none d-md-block">
              <button
                class="btn btn-primary dropdown-toggle"
                type="button"
                id="promptDropdown"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–ø—Ç
              </button>
              <ul class="dropdown-menu" aria-labelledby="promptDropdown" id="promptDropdownMenu">
                <!-- Dropdown items will be rendered here by JS -->
              </ul>
            </div>
            
            <button
              id="addPromptBtn"
              class="btn btn-outline-primary"
              data-bs-toggle="modal"
              data-bs-target="#promptModal"
            >
              <i class="bi-plus-circle-fill"></i>
              <span class="ms-1">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç</span>
            </button>
          </div>
        </div>

        <!-- Prompt Content -->
        <div class="col-12">
          <div
            class="tab-content border bg-white p-4 rounded-3"
            id="prompt-tab-content"
          >
            <!-- Tab content will be rendered here by JS -->
            <div class="tab-pane fade show active" id="no-prompt-selected">
              <p class="text-muted text-center py-5">
                –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –∏–∑ —Å–ø–∏—Å–∫–∞, –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π.
              </p>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Offcanvas Menu for Mobile -->
    <div
      class="offcanvas offcanvas-start"
      tabindex="-1"
      id="offcanvasMenu"
      aria-labelledby="offcanvasMenuLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasMenuLabel">–ú–µ–Ω—é –ø—Ä–æ–º–ø—Ç–æ–≤</h5>
        <button
          type="button"
          class="btn-close text-reset"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div class="list-group" id="mobilePromptList">
          <!-- List items will be rendered here by JS -->
        </div>
      </div>
    </div>

    <!-- Modals and Toasts here... -->

    <!-- Prompt Modal (Add/Edit) -->
    <div
      class="modal fade"
      id="promptModal"
      tabindex="-1"
      aria-labelledby="promptModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="promptModalLabel">–ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="promptForm">
              <div class="mb-3">
                <label for="promptTabNameInput" class="form-label"
                  >–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="promptTabNameInput"
                  required
                />
                <div class="invalid-feedback">
                  –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞.
                </div>
              </div>

              <div id="variationsContainer">
                <h6 class="mb-3">–í–∞—Ä–∏–∞—Ü–∏–∏</h6>
                <!-- Variations will be dynamically added here -->
              </div>
              <button type="button" class="btn btn-sm btn-outline-secondary" id="addVariationBtn">
                <i class="bi-plus-lg"></i> –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞—Ü–∏—é
              </button>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
            <button type="button" class="btn btn-primary" id="savePromptBtn">
              –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div
      class="modal fade"
      id="deleteConfirmModal"
      tabindex="-1"
      aria-labelledby="deleteConfirmModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteConfirmModalLabel">
              –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–º–ø—Ç
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç?
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
              –£–¥–∞–ª–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container for Notifications -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="copyToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <i class="bi-check-circle-fill text-success me-2"></i>
          <strong class="me-auto">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</strong>
          <small class="text-body-secondary">–°–µ–π—á–∞—Å</small>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body">–¢–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.</div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- DATA & STATE ---
        let prompts = [];
        let promptIdToEdit = null;
        let promptIdToDelete = null;
        let activePromptId = null;

        const defaultPrompts = [
          {
            id: 'd1',
            tabName: "–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫",
            isDefault: true,
            variations: [
              {
                id: 'v1',
                title: "–° –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π",
                text: "–ü–µ—Ä–µ–≤–µ–¥–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Å—Ç–∏–ª—å: {{TEXT}}",
              },
              {
                id: 'v2',
                title: "–° —Ä—É—Å—Å–∫–æ–≥–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π",
                text: "–ü–µ—Ä–µ–≤–µ–¥–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç —Å —Ä—É—Å—Å–∫–æ–≥–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Å—Ç–∏–ª—å: {{TEXT}}",
              },
            ],
          },
          {
            id: 'd2',
            tabName: "–†–µ–∑—é–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
            isDefault: true,
            variations: [
              {
                id: 'v3',
                title: "–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ",
                text: "–°–¥–µ–ª–∞–π –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞, –≤—ã–¥–µ–ª–∏–≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏ –∏ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã: {{TEXT}}",
              },
              {
                id: 'v4',
                title: "–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–µ–∑—é–º–µ",
                text: "–°–¥–µ–ª–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–µ–∑—é–º–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞, —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Ñ–∞–∫—Ç—ã, –¥–µ—Ç–∞–ª–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã: {{TEXT}}",
              },
            ],
          },
          {
            id: 'default-1',
            tabName: '–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
            isDefault: true,
            variations: [
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 1: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)', text: '–°–¥–µ–ª–∞–π –¥–æ—Å–ª–æ–≤–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º:\n1.  **–¢–æ—á–Ω–æ—Å—Ç—å:** –ö–æ–ø–∏—Ä—É–π —Ç–µ–∫—Å—Ç —Å–∏–º–≤–æ–ª –≤ —Å–∏–º–≤–æ–ª, –≤–∫–ª—é—á–∞—è –≤—Å–µ –æ–ø–µ—á–∞—Ç–∫–∏, –æ—à–∏–±–∫–∏ –∏ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è.\n2.  **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –°–æ—Ö—Ä–∞–Ω—è–π –≤—Å–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫, –∞–±–∑–∞—Ü—ã –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã.\n3.  **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤) –ø–µ—Ä–µ–¥–∞–≤–∞–π —Å –ø–æ–º–æ—â—å—é Markdown (**–∂–∏—Ä–Ω—ã–π**, *–∫—É—Ä—Å–∏–≤*).\n4.  **–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∏—á–µ–≥–æ –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–π, –Ω–µ –¥–æ–ø–æ–ª–Ω—è–π –∏ –Ω–µ –∏–∑–º–µ–Ω—è–π.' },
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 2: –õ–∞–∫–æ–Ω–∏—á–Ω—ã–π (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)', text: '–ò–∑–≤–ª–µ–∫–∏ —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –µ—Å—Ç—å, –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –°–æ—Ö—Ä–∞–Ω—è–π —Ä–µ–≥–∏—Å—Ç—Ä, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é, –æ—à–∏–±–∫–∏ –∏ –≤—Å–µ –ø—Ä–æ–±–µ–ª—ã. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤) –ø–µ—Ä–µ–¥–∞–π —á–µ—Ä–µ–∑ Markdown.' },
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 3: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)', text: '–°–æ–∑–¥–∞–π —Ç–æ—á–Ω—É—é —Ç–µ–∫—Å—Ç–æ–≤—É—é –∫–æ–ø–∏—é (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é) –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–±–ª—é–¥–∞—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n-   **–î–æ—Å–ª–æ–≤–Ω–æ—Å—Ç—å:** –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –Ω–∞ 100% –∏–¥–µ–Ω—Ç–∏—á–Ω–æ, –≤–∫–ª—é—á–∞—è –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.\n-   **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏ –≤—Å–µ –∞–±–∑–∞—Ü—ã, —Ä–∞–∑—Ä—ã–≤—ã —Å—Ç—Ä–æ–∫ –∏ –æ—Ç—Å—Ç—É–ø—ã, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏–º–≤–æ–ª—ã –ø—Ä–æ–±–µ–ª–∞ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏.\n-   **–ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**\n    -   –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–∫–ª—é—á–∞–π –≤ **–∑–≤–µ–∑–¥–æ—á–∫–∏**.\n    -   –ö—É—Ä—Å–∏–≤ ‚Äî –≤ *–∑–≤–µ–∑–¥–æ—á–∫–∏*.\n    -   –°–ø–∏—Å–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –º–∞—Ä–∫–µ—Ä–æ–≤ (-, *, 1.).\n    -   –ï—Å–ª–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤—å –µ—ë –≤ –≤–∏–¥–µ Markdown-—Ç–∞–±–ª–∏—Ü—ã.\n-   **–ó–∞–ø—Ä–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é:** –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ.' }
            ]
          },
          {
            id: 'default-2',
            tabName: '–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞',
            isDefault: true,
            variations: [
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 1: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞', text: '**–†–æ–ª—å:** –¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–º—É –¥–∏–∑–∞–π–Ω—É –∏ UX-–∫–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥—É. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç, –∞ —É–ª—É—á—à–∞—Ç—å –µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –∏ —É—Å–≤–æ–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.\n\n**–ó–∞–¥–∞—á–∞:** –í–æ–∑—å–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∏–∂–µ —Ç–µ–∫—Å—Ç –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–π –µ–≥–æ –≤ –∏–¥–µ–∞–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Markdown-–¥–æ–∫—É–º–µ–Ω—Ç. –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –¢—ã –º–æ–∂–µ—à—å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∫–∏, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–º—ã—Å–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω.\n\n**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**\n1.  **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏:** –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç –∏ —Ä–∞–∑–±–µ–π –µ–≥–æ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ —Å–æ–∑–¥–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ (#, ##, ###).\n2.  **–°–ø–∏—Å–∫–∏:** –í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, —à–∞–≥–∏ –∏–ª–∏ –∫–ª—é—á–µ–≤—ã–µ –ø—É–Ω–∫—Ç—ã –æ—Ñ–æ—Ä–º–∏ –≤ –≤–∏–¥–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö (*) –∏–ª–∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö (1.) —Å–ø–∏—Å–∫–æ–≤.\n3.  **–ê–∫—Ü–µ–Ω—Ç—ã:** –í—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ –≤–∞–∂–Ω—ã–µ –∏–¥–µ–∏ —Å –ø–æ–º–æ—â—å—é –∂–∏—Ä–Ω–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ –∏ –∫—É—Ä—Å–∏–≤–∞. –î–µ–ª–∞–π —ç—Ç–æ —É–º–µ—Ä–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Ç–µ–∫—Å—Ç.\n4.  **–¶–∏—Ç–∞—Ç—ã:** –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å –ø—Ä—è–º—ã–µ —Ü–∏—Ç–∞—Ç—ã, –º–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏–ª–∏ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã–µ –≤—ã–≤–æ–¥—ã, –æ—Ñ–æ—Ä–º–∏ –∏—Ö –∫–∞–∫ —Ü–∏—Ç–∞—Ç—ã (>).\n5.  **–¢–∞–±–ª–∏—Ü—ã:** –ï—Å–ª–∏ –Ω–∞–π–¥–µ—à—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã (—Å—Ä–∞–≤–Ω–µ–Ω–∏—è, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏), —Å–æ–∑–¥–∞–π –µ—ë.\n6.  **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∞–±–∑–∞—Ü–µ–≤:** –î–ª–∏–Ω–Ω—ã–µ –∞–±–∑–∞—Ü—ã —Ä–∞–∑–±–µ–π –Ω–∞ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ (3-5 —Å—Ç—Ä–æ–∫) –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.\n7.  **–°—Å—ã–ª–∫–∏:** –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å URL-–∞–¥—Ä–µ—Å–∞, –ø—Ä–µ–≤—Ä–∞—Ç–∏ –∏—Ö –≤ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∏.\n\n**–¢–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**\n[–°–Æ–î–ê –í–°–¢–ê–í–ò–¢–¨ –ò–°–•–û–î–ù–´–ô –¢–ï–ö–°–¢]' },
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 2: –≠—Ñ—Ñ–µ–∫—Ç–Ω–∞—è –∏ ¬´–∂–∏–≤–∞—è¬ª –ø–æ–¥–∞—á–∞', text: '**–†–æ–ª—å:** –¢—ã ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å—É—Ö–æ–π —Ç–µ–∫—Å—Ç –≤ —è—Ä–∫–∏–π, –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–π—Å—è –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.\n\n**–ó–∞–¥–∞—á–∞:** –í–æ–∑—å–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∏–∂–µ —Ç–µ–∫—Å—Ç –∏ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π –µ–≥–æ –≤ Markdown, –∏—Å–ø–æ–ª—å–∑—É—è –º–∞–∫—Å–∏–º—É–º –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–Ω–æ–π –ø–æ–¥–∞—á–∏. –¶–µ–ª—å ‚Äî —É–¥–µ—Ä–∂–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª—è –∏ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ "–≤–∞—É-—ç—Ñ—Ñ–µ–∫—Ç". –¢—ã –º–æ–∂–µ—à—å —Å–≤–æ–±–æ–¥–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ–∫—Å—Ç–∞, –¥–æ–±–∞–≤–ª—è—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–æ–ª—å—à–µ–π —É–±–µ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.\n\n**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**\n1.  **–ë—Ä–æ—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:** –°–æ–∑–¥–∞–π —Ü–µ–ø–ª—è—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫ –Ω–∏–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —ç–º–æ–¥–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞).\n2.  **–≠–º–æ–¥–∑–∏ –∏ –∏–∫–æ–Ω–∫–∏:** –ê–∫—Ç–∏–≤–Ω–æ, –Ω–æ —É–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –≤ —Ç–µ–∫—Å—Ç–µ –∏ —Å–ø–∏—Å–∫–∞—Ö, —á—Ç–æ–±—ã –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–∏ (‚úÖ, ‚û°Ô∏è, üéØ).\n3.  **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã —Å HTML:** –ò—Å–ø–æ–ª—å–∑—É–π –±–∞–∑–æ–≤—ã–µ HTML-—Ç–µ–≥–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–º –∫–ª—é—á–µ–≤—ã—Ö —Ñ—Ä–∞–∑. –ù–∞–ø—Ä–∏–º–µ—Ä: ...—Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –¥–æ 50% –≤—Ä–µ–º–µ–Ω–∏.\n4.  **–≠—Ñ—Ñ–µ–∫—Ç "—Å–ª–∞–π–¥–æ–≤":** –†–∞–∑–¥–µ–ª—è–π –∫—Ä—É–ø–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ —Å –ø–æ–º–æ—â—å—é –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ (---).\n5.  **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã (Key Takeaways):** –°–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –º—ã—Å–ª–∏ –æ—Ñ–æ—Ä–º–∏ –≤ –≤–∏–¥–µ –±–ª–æ–∫–∞ —Å —Ü–∏—Ç–∞—Ç–æ–π –∏ –∏–∫–æ–Ω–∫–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä: > üí° **–ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å:** ...\n6.  **–ü—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é (CTA):** –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ–º—ã–π –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é, –≤—ã–¥–µ–ª–∏ –µ–≥–æ –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º –∏–ª–∏ –≤ –≤–∏–¥–µ —Ü–∏—Ç–∞—Ç—ã.\n\n**–¢–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**\n[–°–Æ–î–ê –í–°–¢–ê–í–ò–¢–¨ –ò–°–•–û–î–ù–´–ô –¢–ï–ö–°–¢]' },
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 3: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞)', text: '–ü—Ä–µ–æ–±—Ä–∞–∑—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ —Ñ–æ—Ä–º–∞—Ç Markdown, –Ω–µ —Å–æ–∫—Ä–∞—â–∞—è –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ.\n\n–°—Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –¥–≤—É—Ö —Ü–µ–ª—è—Ö:\n1.  **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–π –∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ø–∏—Å–∫–∏, –≤—ã–¥–µ–ª–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü—ã, —Ü–∏—Ç–∞—Ç—ã –∏ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á—ë—Ç–∫–æ–π –∏ –ª–æ–≥–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.\n2.  **–≠—Ñ—Ñ–µ–∫—Ç–Ω–æ—Å—Ç—å:** –î–æ–±–∞–≤—å —É–º–µ—Å—Ç–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (—ç–º–æ–¥–∑–∏, —Ü–≤–µ—Ç–æ–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ HTML) –¥–ª—è –±–æ–ª–µ–µ —è—Ä–∫–æ–π –∏ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–µ–π—Å—è –ø–æ–¥–∞—á–∏.\n\n–°–¥–µ–ª–∞–π –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.\n\n**–¢–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**\n[–°–Æ–î–ê –í–°–¢–ê–í–ò–¢–¨ –ò–°–•–û–î–ù–´–ô –¢–ï–ö–°–¢]' }
            ]
          },
          {
            id: 'default-3',
            tabName: '–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∞—É–¥–∏–æ',
            isDefault: true,
            variations: [
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî –°—Ç—Ä–æ–≥–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ', text: '–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É –∞—É–¥–∏–æ, —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—è:\n\n1. –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ —Ä–µ—á—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ—Å–ª–æ–≤–Ω–æ: –Ω–µ —É–¥–∞–ª—è–π—Ç–µ —Å–ª–æ–≤-–ø–∞—Ä–∞–∑–∏—Ç–æ–≤, –ø–æ–≤—Ç–æ—Ä–æ–≤ –∏–ª–∏ –ø–∞—É–∑.\n2. –î–ª—è –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [–ù–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤–æ], –¥–ª—è —à—É–º–æ–≤ ‚Äî [–®—É–º].\n3. –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ [–º–º:—Å—Å] –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–º—ã—Å–ª–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ –∏–ª–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã.\n4. –°—Ç–∞–≤—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –∏ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –∞–±–∑–∞—Ü—ã.\n5. –°–Ω–∞—á–∞–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–∞–π—Ç–µ: ‚Ä¢ –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è; ‚Ä¢ —Å–ø–∏—Å–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ–º —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏.\n6. –í —Ç–µ–∫—Å—Ç–µ –≤—ã–¥–µ–ª—è–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∂–∏—Ä–Ω—ã–º (`**`).\n7. –ò—Ç–æ–≥–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç: Markdown (`##` ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏, `**` ‚Äî –≤—ã–¥–µ–ª–µ–Ω–∏–µ).\n8. –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–∏—á–µ–≥–æ, —á–µ–≥–æ –Ω–µ—Ç –≤ –∞—É–¥–∏–æ.' },
                { title: '–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –° –≤–æ–∑–º–æ–∂–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º', text: '–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É –∞—É–¥–∏–æ, —Å–æ–±–ª—é–¥–∞—è:\n\n1. –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Ä–µ—á—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ, –Ω–æ –¥–æ–ø—É—Å–∫–∞–π—Ç–µ –ª—ë–≥–∫–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ‚Ä¢ —É–¥–∞–ª—è–π—Ç–µ —Å–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–Ω—É", "–∫–∞–∫ –±—ã", "—Ç–∏–ø–∞", "–≤–æ—Ç"); ‚Ä¢ —É–±–∏—Ä–∞–π—Ç–µ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã. –°–º—ã—Å–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω, —Ç–µ–∫—Å—Ç —á–∏—Ç–∞–µ–º—ã–º.\n2. –î–ª—è –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [–ù–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤–æ], –¥–ª—è —à—É–º–æ–≤ ‚Äî [–®—É–º].\n3. –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ [–º–º:—Å—Å] –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–º—ã—Å–ª–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ –∏–ª–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã.\n4. –°—Ç–∞–≤—å—Ç–µ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –∏ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ –∞–±–∑–∞—Ü—ã –ø–æ —Å–º—ã—Å–ª—É.\n5. –í –Ω–∞—á–∞–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ: ‚Ä¢ –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è; ‚Ä¢ —Å–ø–∏—Å–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ–º —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏.\n6. –í —Ç–µ–∫—Å—Ç–µ –≤—ã–¥–µ–ª—è–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∂–∏—Ä–Ω—ã–º (`**`).\n7. –ò—Ç–æ–≥–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç: Markdown (`##` ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏, `**` ‚Äî –≤—ã–¥–µ–ª–µ–Ω–∏–µ).\n8. –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â—É—é –≤ –∞—É–¥–∏–æ.' }
            ]
          }
        ];

        // --- DOM ELEMENTS ---
        const promptDropdownBtn = document.getElementById("promptDropdown");
        const promptDropdownMenu = document.getElementById("promptDropdownMenu");
        const promptTabContentEl = document.getElementById("prompt-tab-content");
        const promptModalEl = document.getElementById("promptModal");
        const deleteConfirmModalEl = document.getElementById("deleteConfirmModal");
        const promptModal = new bootstrap.Modal(promptModalEl);
        const deleteConfirmModal = new bootstrap.Modal(deleteConfirmModalEl);
        const addPromptBtn = document.getElementById("addPromptBtn");
        const savePromptBtn = document.getElementById("savePromptBtn");
        const confirmDeleteBtn = document.getElementById("confirmDeleteBtn");
        const addVariationBtn = document.getElementById("addVariationBtn");
        const copyToast = new bootstrap.Toast(document.getElementById("copyToast"));
        const promptTabNameInput = document.getElementById("promptTabNameInput");
        const mobilePromptList = document.getElementById("mobilePromptList");

        // --- DATA FUNCTIONS ---
        function loadPrompts() {
          const storedPrompts = localStorage.getItem("prompts");
          if (storedPrompts) {
            prompts = JSON.parse(storedPrompts);
          } else {
            prompts = defaultPrompts;
            savePrompts();
          }
          if (prompts.length > 0) {
            activePromptId = prompts[0].id;
          }
        }

        function savePrompts() {
          localStorage.setItem("prompts", JSON.stringify(prompts));
        }

        function findPrompt(id) {
          return prompts.find((p) => p.id === id);
        }

        function getActivePrompt() {
          return findPrompt(activePromptId);
        }

        // --- RENDER FUNCTIONS ---
        function renderUI() {
          renderDesktopDropdown();
          renderMobileMenu();
          renderContent();
        }

        function renderDesktopDropdown() {
          promptDropdownMenu.innerHTML = "";
          const activePrompt = getActivePrompt();
          if (activePrompt) {
            promptDropdownBtn.textContent = activePrompt.tabName;
          } else {
            promptDropdownBtn.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–ø—Ç";
          }
          
          prompts.forEach((prompt) => {
            const isActive = prompt.id === activePromptId;
            const itemHTML = `
              <li><a class="dropdown-item ${isActive ? 'active' : ''}" href="#" data-id="${prompt.id}">${prompt.tabName}</a></li>
            `;
            promptDropdownMenu.insertAdjacentHTML("beforeend", itemHTML);
          });
          
          promptDropdownMenu.querySelectorAll('.dropdown-item').forEach(item => {
            item.addEventListener('click', (e) => {
              e.preventDefault();
              activePromptId = e.target.dataset.id;
              renderUI();
            });
          });
        }

        function renderMobileMenu() {
          mobilePromptList.innerHTML = "";
          const activePrompt = getActivePrompt();

          prompts.forEach((prompt) => {
            const isActive = prompt.id === activePromptId;
            const itemHTML = `
              <a href="#" class="list-group-item list-group-item-action ${isActive ? 'active' : ''}" data-id="${prompt.id}" data-bs-dismiss="offcanvas">
                ${prompt.tabName}
              </a>
            `;
            mobilePromptList.insertAdjacentHTML("beforeend", itemHTML);
          });
          
          mobilePromptList.querySelectorAll('.list-group-item').forEach(item => {
            item.addEventListener('click', (e) => {
              e.preventDefault();
              activePromptId = e.target.dataset.id;
              renderUI();
            });
          });
        }

        function renderContent() {
          promptTabContentEl.innerHTML = "";
          const activePrompt = getActivePrompt();

          if (!activePrompt) {
            promptTabContentEl.innerHTML = `
              <div class="tab-pane fade show active" id="no-prompt-selected">
                <p class="text-muted text-center py-5">
                  –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –∏–∑ —Å–ø–∏—Å–∫–∞, –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π.
                </p>
              </div>
            `;
            return;
          }

          const variationsHTML = activePrompt.variations
            .map(
              (variation) => `
              <div class="col-md-6 mb-4">
                <div class="card h-100">
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title">${variation.title}</h5>
                    <p class="card-text text-muted flex-grow-1">
                      ${variation.text}
                    </p>
                    <div class="mt-auto d-flex justify-content-end gap-2">
                      <button class="btn btn-sm btn-outline-primary copy-btn" data-clipboard-target="#variation-${variation.id}">
                        <i class="bi-clipboard"></i>
                        <span class="d-lg-none d-xl-inline">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                      </button>
                      <button class="btn btn-sm btn-outline-secondary edit-btn" data-id="${activePrompt.id}" data-variation-id="${variation.id}">
                        <i class="bi-pencil"></i>
                        <span class="d-lg-none d-xl-inline">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                      </button>
                    </div>
                    <textarea id="variation-${variation.id}" class="d-none">${variation.text}</textarea>
                  </div>
                </div>
              </div>
            `
            )
            .join("");

          const tabContentHTML = `
            <div
              class="tab-pane fade show active"
              id="content-${activePrompt.id}"
              role="tabpanel"
            >
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="d-md-none mb-0">${activePrompt.tabName}</h5>
                <div class="ms-auto d-flex">
                  <button class="btn btn-sm btn-outline-secondary me-2 edit-btn" data-id="${activePrompt.id}" data-variation-id="">
                    <i class="bi-pencil-fill"></i>
                    <span class="d-none d-lg-inline ms-1">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                  </button>
                  ${
                    !activePrompt.isDefault
                      ? `<button class="btn btn-sm btn-outline-danger delete-btn" data-id="${activePrompt.id}">
                            <i class="bi-trash"></i>
                            <span class="d-none d-lg-inline ms-1">–£–¥–∞–ª–∏—Ç—å</span>
                        </button>`
                      : ""
                  }
                </div>
              </div>
              <div class="row g-3">
                ${variationsHTML}
              </div>
            </div>
          `;
          promptTabContentEl.insertAdjacentHTML("beforeend", tabContentHTML);
        }

        // --- EVENT LISTENERS (DELEGATED) ---
        function addEventListenersToControls() {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
            document.addEventListener('click', (e) => {
                const target = e.target.closest('.edit-btn, .delete-btn, .copy-btn');
                if (!target) return;

                // –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞/–≤–∞—Ä–∏–∞—Ü–∏–∏
                if (target.classList.contains('edit-btn')) {
                    const promptId = target.dataset.id;
                    const variationId = target.dataset.variationId;
                    handleEdit(promptId, variationId);
                }
                
                // –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞
                else if (target.classList.contains('delete-btn')) {
                    const promptId = target.dataset.id;
                    handleDelete(promptId);
                }

                // –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
                else if (target.classList.contains('copy-btn')) {
                    const targetId = target.dataset.clipboard-target;
                    const textToCopy = document.querySelector(targetId).value;

                    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
                    const tempInput = document.createElement('textarea');
                    tempInput.value = textToCopy;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    
                    try {
                        document.execCommand('copy');
                        copyToast.show();
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                    
                    document.body.removeChild(tempInput);
                }
            });

            // –°–ª—É—à–∞—Ç–µ–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
            savePromptBtn.addEventListener('click', savePrompt);
        }

        // --- HANDLERS ---
        function handleAdd() {
          promptIdToEdit = null;
          document.getElementById("promptModalLabel").textContent = "–ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç";
          document.getElementById("promptTabNameInput").value = "";
          renderVariationsForm(); 
          promptModal.show();
        }

        function handleEdit(id, variationId = null) {
          const promptToEdit = findPrompt(id);
          if (!promptToEdit) return;

          promptIdToEdit = id;
          document.getElementById("promptModalLabel").textContent = `–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: ${promptToEdit.tabName}`;
          document.getElementById("promptTabNameInput").value = promptToEdit.tabName;

          if (variationId) {
            const variation = promptToEdit.variations.find(v => v.id === variationId);
            renderVariationsForm([variation]);
          } else {
            renderVariationsForm(promptToEdit.variations);
          }
          
          promptModal.show();
        }

        function handleDelete(id) {
            promptIdToDelete = id;
            deleteConfirmModal.show();
        }

        function renderVariationsForm(variations = [{ title: "", text: "" }]) {
          const variationsContainer = document.getElementById("variationsContainer");
          variationsContainer.innerHTML = "";

          variations.forEach((variation, index) => {
            const variationHTML = `
              <div class="card p-3 mb-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <label for="variationTitle${index}" class="form-label mb-0">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                  <button type="button" class="btn btn-sm btn-outline-danger delete-variation-btn" data-index="${index}">
                      <i class="bi-trash"></i>
                  </button>
                </div>
                <div>
                  <input type="text" class="form-control variation-title" id="variationTitle${index}" value="${variation.title}" data-index="${index}" required />
                </div>
                <div class="mt-2">
                  <label for="variationText${index}" class="form-label">–¢–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞</label>
                  <textarea class="form-control variation-text" id="variationText${index}" rows="3" data-index="${index}" required>${variation.text}</textarea>
                </div>
              </div>
            `;
            variationsContainer.insertAdjacentHTML("beforeend", variationHTML);
          });
          addDeleteVariationListeners();
        }
        
        function addVariationField() {
            const variationsContainer = document.getElementById('variationsContainer');
            const variationCount = document.querySelectorAll('.variation-title').length;
            const newVariationHTML = `
                <div class="card p-3 mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label for="variationTitle${variationCount}" class="form-label mb-0">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <button type="button" class="btn btn-sm btn-outline-danger delete-variation-btn" data-index="${variationCount}">
                            <i class="bi-trash"></i>
                        </button>
                    </div>
                    <div>
                        <input type="text" class="form-control variation-title" id="variationTitle${variationCount}" data-index="${variationCount}" required />
                    </div>
                    <div class="mt-2">
                        <label for="variationText${variationCount}" class="form-label">–¢–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞</label>
                        <textarea class="form-control variation-text" id="variationText${variationCount}" rows="3" data-index="${variationCount}" required></textarea>
                    </div>
                </div>
            `;
            variationsContainer.insertAdjacentHTML('beforeend', newVariationHTML);
            addDeleteVariationListeners();
        }

        function addDeleteVariationListeners() {
            document.querySelectorAll('.delete-variation-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const variationCard = e.target.closest('.card');
                    if (variationCard) {
                        variationCard.remove();
                    }
                });
            });
        }

        function savePrompt() {
          const promptTabNameInput = document.getElementById("promptTabNameInput");
          const promptTabName = promptTabNameInput.value.trim();

          if (!promptTabName) {
            promptTabNameInput.classList.add("is-invalid");
            return;
          }

          promptTabNameInput.classList.remove("is-invalid");
          
          const variationTitles = document.querySelectorAll(".variation-title");
          const variationTexts = document.querySelectorAll(".variation-text");
          const variations = [];

          let hasError = false;
          variationTitles.forEach((titleInput, index) => {
            const title = titleInput.value.trim();
            const text = variationTexts[index].value.trim();
            if (!title || !text) {
              titleInput.classList.add("is-invalid");
              variationTexts[index].classList.add("is-invalid");
              hasError = true;
            } else {
              titleInput.classList.remove("is-invalid");
              variationTexts[index].classList.remove("is-invalid");
              const existingId = promptIdToEdit && findPrompt(promptIdToEdit).variations[index] ? findPrompt(promptIdToEdit).variations[index].id : null;
              variations.push({
                id: existingId || `v${Date.now() + Math.random().toString(36).substring(2, 5)}`,
                title,
                text,
              });
            }
          });

          if (hasError) {
              return;
          }

          if (promptIdToEdit) {
            const existingPrompt = findPrompt(promptIdToEdit);
            if (existingPrompt) {
              existingPrompt.tabName = promptTabName;
              existingPrompt.variations = variations;
              activePromptId = existingPrompt.id;
            }
          } else {
            const newPromptId = `p${Date.now() + Math.random().toString(36).substring(2, 5)}`;
            prompts.push({ id: newPromptId, tabName: promptTabName, variations, isDefault: false });
            activePromptId = newPromptId;
          }

          savePrompts();
          renderUI();
          promptModal.hide();
        }

        function deletePrompt() {
          if (!promptIdToDelete) return;
          prompts = prompts.filter(p => p.id !== promptIdToDelete);
          savePrompts();
          if (prompts.length > 0) {
            activePromptId = prompts[0].id;
          } else {
            activePromptId = null;
          }
          renderUI();
          deleteConfirmModal.hide();
          promptIdToDelete = null;
        }

        // --- INITIALIZATION ---
        addPromptBtn.addEventListener('click', handleAdd);
        confirmDeleteBtn.addEventListener('click', deletePrompt);
        addVariationBtn.addEventListener('click', addVariationField);

        // –°–ª—É—à–∞—Ç–µ–ª—å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞
        promptTabNameInput.addEventListener('input', () => {
          promptTabNameInput.classList.toggle('is-invalid', !promptTabNameInput.value.trim());
        });

        // –ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
        addEventListenersToControls();

        loadPrompts();
        renderUI();
      });
    </script>
  </body>
</html>
